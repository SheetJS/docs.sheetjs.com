"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7254],{9613:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(9496);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=u(n),m=r,f=c["".concat(s,".").concat(m)]||c[m]||d[m]||i;return n?a.createElement(f,l(l({ref:t},p),{},{components:n})):a.createElement(f,l({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var u=2;u<i;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8264:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(9496),r=n(1626),i="tabItem_ZP9l";function l(e){var t=e.children,n=e.hidden,l=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(i,l),hidden:n},t)}},114:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(2848),r=n(9496),i=n(3026),l=n(8658),o=n(1823),s=n(4807),u=n(1626),p="tabList_XleC",d="tabItem_hpFr";function c(e){var t,n,i,c=e.lazy,m=e.block,f=e.defaultValue,k=e.values,b=e.groupId,h=e.className,v=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=k?k:v.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),y=(0,l.l)(g,(function(e,t){return e.value===t.value}));if(y.length>0)throw new Error('Docusaurus error: Duplicate values "'+y.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var N=null===f?f:null!=(t=null!=f?f:null==(n=v.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(i=v[0])?void 0:i.props.value;if(null!==N&&!g.some((function(e){return e.value===N})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+N+'" but none of its children has the corresponding value. Available values are: '+g.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=(0,o.U)(),x=w.tabGroupChoices,C=w.setTabGroupChoices,T=(0,r.useState)(N),O=T[0],j=T[1],E=[],P=(0,s.o5)().blockElementScrollPositionUntilNextRender;if(null!=b){var I=x[b];null!=I&&I!==O&&g.some((function(e){return e.value===I}))&&j(I)}var S=function(e){var t=e.currentTarget,n=E.indexOf(t),a=g[n].value;a!==O&&(P(t),j(a),null!=b&&C(b,a))},_=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=E.indexOf(e.currentTarget)+1;n=E[a]||E[0];break;case"ArrowLeft":var r=E.indexOf(e.currentTarget)-1;n=E[r]||E[E.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,u.Z)("tabs-container",p)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,u.Z)("tabs",{"tabs--block":m},h)},g.map((function(e){var t=e.value,n=e.label,i=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:O===t?0:-1,"aria-selected":O===t,key:t,ref:function(e){return E.push(e)},onKeyDown:_,onFocus:S,onClick:S},i,{className:(0,u.Z)("tabs__item",d,null==i?void 0:i.className,{"tabs__item--active":O===t})}),null!=n?n:t)}))),c?(0,r.cloneElement)(v.filter((function(e){return e.props.value===O}))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},v.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==O})}))))}function m(e){var t=(0,i.Z)();return r.createElement(c,(0,a.Z)({key:String(t)},e))}},5962:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return p},default:function(){return k},frontMatter:function(){return u},metadata:function(){return d},toc:function(){return m}});var a=n(2848),r=n(9213),i=(n(9496),n(9613)),l=n(114),o=n(8264),s=["components"],u={sidebar_position:7,hide_table_of_contents:!0},p="Contributing",d={unversionedId:"miscellany/contributing",id:"miscellany/contributing",title:"Contributing",description:"Due to the precarious nature of the Open Specifications Promise, it is very",source:"@site/docs/09-miscellany/07-contributing.md",sourceDirName:"09-miscellany",slug:"/miscellany/contributing",permalink:"/docs/miscellany/contributing",draft:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,hide_table_of_contents:!0},sidebar:"tutorialSidebar",previous:{title:"Testing",permalink:"/docs/miscellany/testing"},next:{title:"License",permalink:"/docs/miscellany/license"}},c={},m=[{value:"Platform-Specific Details",id:"platform-specific-details",level:2},{value:"Tests",id:"tests",level:3}],f={toc:m};function k(e){var t=e.components,n=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"contributing"},"Contributing"),(0,i.kt)("p",null,"Due to the precarious nature of the Open Specifications Promise, it is very\nimportant to ensure code is cleanroom.  ",(0,i.kt)("a",{parentName:"p",href:"https://raw.githubusercontent.com/SheetJS/sheetjs/master/CONTRIBUTING.md"},"Contribution Notes")),(0,i.kt)("details",null,(0,i.kt)("summary",null,(0,i.kt)("b",null,"File organization")," (click to show)"),(0,i.kt)("p",null,"At a high level, the final script is a concatenation of the individual files in\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"bits")," folder.  Running ",(0,i.kt)("inlineCode",{parentName:"p"},"make")," should reproduce the final output on all\nplatforms."),(0,i.kt)("p",null,"Folders:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"folder"),(0,i.kt)("th",{parentName:"tr",align:"left"},"contents"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"bits")),(0,i.kt)("td",{parentName:"tr",align:"left"},"raw source files that make up the final script")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"bin")),(0,i.kt)("td",{parentName:"tr",align:"left"},"server-side bin scripts (",(0,i.kt)("inlineCode",{parentName:"td"},"xlsx.njs"),")")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"dist")),(0,i.kt)("td",{parentName:"tr",align:"left"},"dist files for web browsers and nonstandard JS environments")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"demos")),(0,i.kt)("td",{parentName:"tr",align:"left"},"demo projects for platforms like ExtendScript and Webpack")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"tests")),(0,i.kt)("td",{parentName:"tr",align:"left"},"browser tests (run ",(0,i.kt)("inlineCode",{parentName:"td"},"make ctest")," to rebuild)")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"types")),(0,i.kt)("td",{parentName:"tr",align:"left"},"typescript definitions and tests")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"misc")),(0,i.kt)("td",{parentName:"tr",align:"left"},"miscellaneous supporting scripts")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},(0,i.kt)("inlineCode",{parentName:"td"},"test_files")),(0,i.kt)("td",{parentName:"tr",align:"left"},"test files (pulled from the test files repository)"))))),(0,i.kt)("p",null,"After cloning the repo, running ",(0,i.kt)("inlineCode",{parentName:"p"},"make help")," will display a list of commands."),(0,i.kt)("h2",{id:"platform-specific-details"},"Platform-Specific Details"),(0,i.kt)(l.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"osx",label:"OSX/Linux",mdxType:"TabItem"},(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"xlsx.js")," file is constructed from the files in the ",(0,i.kt)("inlineCode",{parentName:"p"},"bits")," subdirectory. The\nbuild script (run ",(0,i.kt)("inlineCode",{parentName:"p"},"make"),") will concatenate the individual bits to produce the\nscript.  Before submitting a contribution, ensure that running make will produce\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"xlsx.js")," file exactly.  The simplest way to test is to add the script:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ git add xlsx.js\n$ make clean\n$ make\n$ git diff xlsx.js\n")),(0,i.kt)("p",null,"To produce the dist files, run ",(0,i.kt)("inlineCode",{parentName:"p"},"make dist"),".  The dist files are updated in each\nversion release and ",(0,i.kt)("em",{parentName:"p"},"should not be committed between versions"),".")),(0,i.kt)(o.Z,{value:"win",label:"Windows",mdxType:"TabItem"},(0,i.kt)("p",null,"The included ",(0,i.kt)("inlineCode",{parentName:"p"},"make.cmd")," script will build ",(0,i.kt)("inlineCode",{parentName:"p"},"xlsx.js")," from the ",(0,i.kt)("inlineCode",{parentName:"p"},"bits")," directory.\nBuilding is as simple as:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cmd"},"> make\n")),(0,i.kt)("p",null,"To prepare development environment:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cmd"},"> make init\n")),(0,i.kt)("p",null,"The full list of commands available in Windows are displayed in ",(0,i.kt)("inlineCode",{parentName:"p"},"make help"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"make init -- install deps and global modules\nmake lint -- run eslint linter\nmake test -- run mocha test suite\nmake misc -- run smaller test suite\nmake book -- rebuild README and summary\nmake help -- display this message\n")),(0,i.kt)("p",null,"As explained in ",(0,i.kt)("a",{parentName:"p",href:"./testing#test-files"},"Test Files"),", on Windows the release ZIP file must\nbe downloaded and extracted.  If Bash on Windows is available, it is possible\nto run the OSX/Linux workflow.  The following steps prepares the environment:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"# Install support programs for the build and test commands\nsudo apt-get install make git subversion mercurial\n\n# Install nodejs and NPM within the WSL\nwget -qO- https://deb.nodesource.com/setup_8.x | sudo bash\nsudo apt-get install nodejs\n\n# Install dev dependencies\nsudo npm install -g mocha voc blanket xlsjs\n")))),(0,i.kt)("h3",{id:"tests"},"Tests"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"test_misc")," target (",(0,i.kt)("inlineCode",{parentName:"p"},"make test_misc")," on Linux/OSX / ",(0,i.kt)("inlineCode",{parentName:"p"},"make misc")," on Windows)\nruns the targeted feature tests.  It should take 5-10 seconds to perform feature\ntests without testing against the entire test battery.  New features should be\naccompanied with tests for the relevant file formats and features."),(0,i.kt)("p",null,"For tests involving the read side, an appropriate feature test would involve\nreading an existing file and checking the resulting workbook object.  If a\nparameter is involved, files should be read with different values to verify that\nthe feature is working as expected."),(0,i.kt)("p",null,"For tests involving a new write feature which can already be parsed, appropriate\nfeature tests would involve writing a workbook with the feature and then opening\nand verifying that the feature is preserved."),(0,i.kt)("p",null,"For tests involving a new write feature without an existing read ability, please\nadd a feature test to the kitchen sink ",(0,i.kt)("inlineCode",{parentName:"p"},"tests/write.js"),"."))}k.isMDXComponent=!0}}]);